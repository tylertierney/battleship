(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{28:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),o=n(9),s=n.n(o),a=n(4),l=n(2),c=n(0),u=function(e,t,n,r,i,o){for(var s=0;s<e.length;s++){var a=e[s].coords[0],l=e[s].coords[1];if(a===i[0]&&l===i[1]&&(n=Object(c.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:"rgb(0, 0, 0, 0.3)",zIndex:-1}})),a<0||a>7)return{inner:null,handleClick:null};if(l<0||l>7)return{inner:null,handleClick:null};0!=o[a][l]&&(n=null,r=null)}return{inner:n,handleClick:r}},h=function(e,t,n,r){e.target;var i=e.clientX-n,o=e.clientY-r;(t=t.current).style.top=o+"px",t.style.left=i+"px"},d=function(e){e.current&&(e.current.style.display="flex",e.current.style.visibility="visible")},f=function(e){e.current&&(e.current.style.display="none",e.current.style.visibility="hidden")},j=Array(8).fill(0).map((function(){return Array(8).fill(0)})),p=function(){var e=function(e,t,n,r){for(var i=n,o=0;o<e;o++,i++){if(i>7)return!1;if(0!=t[i][r])return!1}return!0},t=[{name:"battleship",values:[2,1,1,3],orientation:"Horizontal"},{name:"carrier",values:[2,1,1,1,3],orientation:"Horizontal"},{name:"cruiser",values:[2,1,3],orientation:"Horizontal"},{name:"submarine",values:[2,1,3],orientation:"Horizontal"},{name:"destroyer",values:[2,3],orientation:"Horizontal"}];for(var n in t){var r=Math.floor(2*Math.random()),i=t[n];r&&(i.orientation="Vertical",i.values[0]=4,i.values[i.values.length-1]=5)}var o=Array(8).fill(0).map((function(){return Array(8).fill(0)})),s=[0,1,2,3,4,5,6,7];for(var a in t){var l=t[a],c=l.values;if("Horizontal"===l.orientation){var u=Math.floor(Math.random()*s.length),h=s[u];s.splice(u,1);for(var d=Math.floor(Math.random()*(8-c.length-1)),f=0;f<c.length;d++,f++)o[h][d]=c[f]}}for(var j=0;j<t.length;j++){var p=t[j],b=p.values;if("Vertical"===p.orientation)for(var x=Math.floor(Math.random()*(8-(b.length-1))),v=Math.floor(8*Math.random()),O=!1,g=0;g<8;g++){for(var y=0;y<8;y++){if(e(b.length,o,x,v)){for(var m=0;m<b.length;m++,x++)o[x][v]=b[m];O=!0;break}7===v?v=0:v++}if(O)break;7===x?x=0:x++}}return o}(),b=i.a.createContext(j),x=function(e){var t=e.children,n=Object(r.useReducer)((function(e,t){if("enterShips"===t.type)return t.payload}),j),i=Object(l.a)(n,2),o=i[0],s=i[1],u={ocean:o,enterShips:function(e,t){var n=Object(a.a)(o);n=function(e,t,n){for(var r=0;r<t.length;r++){var i=t[r].coords[0],o=t[r].coords[1];0===r?e[i][o]="Horizontal"===n?2:4:r===t.length-1?e[i][o]="Horizontal"===n?3:5:e[i][o]=1}return e}(n,e,t),s({type:"enterShips",payload:n})},computerOcean:p};return Object(c.jsx)(b.Provider,{value:u,children:t})},v=function(){return Object(r.useContext)(b)},O=n(10),g=function e(t,n,r,i,o){Object(O.a)(this,e),this.name=void 0,this.length=void 0,this.orientation=void 0,this.coordinateArray=void 0,this.isCurrent=void 0,this.name=t,this.length=n,this.orientation=r,this.coordinateArray=i,this.isCurrent=o},y=[new g("Battleship",4,"Horizontal",null,!0),new g("Carrier",5,"Horizontal",null,!1),new g("Cruiser",3,"Horizontal",null,!1),new g("Submarine",3,"Horizontal",null,!1),new g("Destroyer",2,"Horizontal",null,!1)],m=i.a.createContext(y),C=function(e){var t=e.children,n=Object(r.useReducer)((function(e,t){switch(t.type){case"setCurrentShip":case"updateCurrentShip":return t.payload}}),y),i=Object(l.a)(n,2),o=i[0],s=i[1],u={currentShip:function(){for(var e=0;e<o.length;e++)if(o[e].isCurrent)return o[e]},updateCurrentShip:function(e,t){for(var n,r=Object(a.a)(o),i=0;i<r.length;i++)if(r[i].isCurrent)switch(n=r[i],e){case"changeOrientation":"Vertical"===n.orientation?n.orientation="Horizontal":n.orientation="Vertical",s({type:"updateCurrentShip",payload:r});break;case"updateCoords":n.coordinateArray=t,s({type:"updateCurrentShip",payload:r})}},setCurrentShip:function(e){for(var t=Object(a.a)(o),n=0;n<t.length;n++){if(e.name===t[n].name)return n===t.length-1||(t[n].isCurrent=!1,t[n+1].isCurrent=!0),void s({type:"setCurrentShip",payload:t});t[n].isCurrent=!1}},ships:o};return Object(c.jsx)(m.Provider,{value:u,children:t})},w=function(){return Object(r.useContext)(m)},S=i.a.createContext(25),z=function(e){var t=e.children,n=Object(r.useState)(25),i=Object(l.a)(n,2),o={squareSize:i[0],setSquareSize:i[1]};return Object(c.jsx)(S.Provider,{value:o,children:t})},I=function(){return Object(r.useContext)(S)},q=n(11),H=n.n(q),R=(n(3),n(7)),k=function(){I().squareSize;var e=w(),t=(e.ships,e.currentShip),n=e.updateCurrentShip,r=t=t(),i=r.name,o=r.length,s=r.orientation;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("h1",{style:{margin:"8px"},className:"instructionsHeader",children:["Place your\xa0",Object(c.jsx)("span",{style:{borderBottom:"2px solid white"},children:i})]}),Object(c.jsxs)("ul",{style:{listStyleType:"none",minWidth:"300px",maxWidth:"450px",padding:"0"},children:[Object(c.jsxs)("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"10px"},children:[Object(c.jsx)("span",{children:"Length:"}),Object(c.jsxs)("span",{className:"instructionControls",children:[o,"\xa0tiles"]})]}),Object(c.jsxs)("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(c.jsx)("span",{children:"Orientation:"}),Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(c.jsx)("span",{style:{textDecoration:"underline",marginRight:"10px"},className:"instructionControls",children:s}),Object(c.jsx)("button",{onClick:function(){return n("changeOrientation")},className:"orientationToggle",children:Object(c.jsx)(R.a,{color:"white",size:"2rem"})})]})]})]})]})},M=function(){return Object(c.jsx)("div",{style:{minHeight:"150px"},children:Object(c.jsx)("h1",{style:{margin:"8px"},className:"instructionsHeader",children:"Take the shot!"})})},V=n(12),D={phase:"enteringShips"},P=i.a.createContext(D),B=function(e){var t=e.children,n=Object(r.useReducer)((function(e,t){if("changeGamePhase"===t.type)return t.payload}),D),i=Object(l.a)(n,2),o=i[0],s=i[1],a={gameInfo:o,changeGamePhase:function(e){var t=Object(V.a)({},o);t.phase=e,s({type:"changeGamePhase",payload:t})}};return Object(c.jsx)(P.Provider,{value:a,children:t})},A=function(){return Object(r.useContext)(P)},E=function(){var e=A().gameInfo;return Object(c.jsx)("div",{style:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"white",maxWidth:"90vw"},children:"enteringShips"===e.phase?Object(c.jsx)(k,{}):Object(c.jsx)(M,{})})},W=function(){for(var e=I().squareSize,t=[],n=0;n<8;n++)t.push(Object(c.jsx)("div",{style:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",color:"white",opacity:"0.5"},children:n+1},n));return Object(c.jsx)("div",{style:{display:"flex",flexDirection:"column",width:e+"px",height:"100%"},children:t})},N=function(){for(var e=I().squareSize,t=[],n=0;n<9;n++){var r=String.fromCharCode(n-1+65);0===n&&(r=null),t.push(Object(c.jsx)("div",{style:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",color:"white",opacity:"0.5"},children:r},n))}return Object(c.jsx)("div",{style:{height:e+"px",width:9*e+"px",display:"flex"},children:t})},F=function(e){e.squareValue;var t=e.coordinates,n=e.isHovering,i=e.setIsHovering,o=e.placementIsDisabled,s=e.setPlacementIsDisabled,l=A(),h=l.gameInfo,d=l.changeGamePhase,f=I().squareSize,j=w(),p=(j.ships,j.currentShip),b=j.setCurrentShip,x=j.updateCurrentShip;p=p();var O=v(),g=O.ocean,y=O.enterShips,m=null,C=function(e,t,n,r){if(null===n||null===r)return null;var i=Array(e).fill(0);if("Vertical"===t)for(var o=-1;o<i.length-1;o++)i[o+1]={coords:[n+o,r],isHit:!1};else for(var s=-1;s<i.length-1;s++)i[s+1]={coords:[n,r+s],isHit:!1};return i}(p.length,p.orientation,n[0],n[1]),S=function(){y(C,p.orientation),x("updateCoords",C),b(p),"Destroyer"===p.name&&d("playing")};if(Object(r.useEffect)((function(){if(C){var e=u(C,0,m,S,t,g);S=e.handleClick,null===e.handleClick?s((function(){return!0})):s((function(){return!1}))}null==C&&s((function(){return!0}))}),[JSON.stringify(C)]),C){var z=u(C,0,m,S,t,g);m=z.inner}return Object(c.jsx)("div",{onClick:o?null:S,onMouseEnter:function(){return i(Object(a.a)(t))},onMouseLeave:"enteringShips"===h.phase?function(){return i([null,null])}:void 0,style:{width:f+"px",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",cursor:"none"},children:m})},L=function(){for(var e=I().squareSize,t=[],n=[],r=0;r<8;r++){var i="2px solid white",o="2px solid white";7===r&&(i="none",o="none"),t.push(Object(c.jsx)("div",{style:{width:e+"px",height:"100%",borderRight:i}},r)),n.push(Object(c.jsx)("div",{style:{width:"100%",height:"50%",borderBottom:o}},r))}return Object(c.jsxs)("div",{style:{width:8*e+"px",height:8*e+"px",position:"absolute",top:"0",left:"0",backgroundColor:"transparent"},children:[Object(c.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",justifyContent:"flex-start",alignItems:"center"},children:t}),Object(c.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},children:n})]})},X=function(e){var t=e.shipColor,n=I().squareSize;return Object(c.jsx)("div",{style:{width:n+"px",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:t,overflow:"hidden",cursor:"none"},children:Object(c.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:t,overflow:"hidden"}})})},Y=function(e){e.coordinates;var t,n=e.squareValue,r=e.shipColor,i=I().squareSize;switch(n){case 2:default:t="pointLeft";break;case 3:t="pointRight","2px solid white";break;case 4:t="pointUp","2px solid white";break;case 5:t="pointDown"}return Object(c.jsx)("div",{style:{height:"95%",width:i+"px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"none"},children:Object(c.jsx)("div",{style:{backgroundColor:r,borderColor:r},className:"endPiece ".concat(t)})})},G=function(e){var t=e.hoverRef,n=e.placementIsDisabled,r=I().squareSize,i=w().currentShip,o=(i=i()).orientation,s=[],a="var(--hoveredShipColor)";n&&(a="var(--disabledShipColor)");for(var l=0;l<i.length;l++)0===l?"Horizontal"===o?s.push(Object(c.jsx)(Y,{coordinates:[3,3],squareValue:2,shipColor:a},l)):s.push(Object(c.jsx)(Y,{coordinates:[3,3],squareValue:4,shipColor:a},l)):l===i.length-1?"Horizontal"===o?s.push(Object(c.jsx)(Y,{coordinates:[3,3],squareValue:3,shipColor:a},l)):s.push(Object(c.jsx)(Y,{coordinates:[3,3],squareValue:5,shipColor:a},l)):s.push(Object(c.jsx)(X,{shipColor:a},l));var u=s.map((function(e,t){return Object(c.jsx)("div",{style:{width:r+"px",height:r+"px",overflow:"hidden"},children:e},t)}));return Object(c.jsx)("div",{ref:t,style:{position:"absolute",display:"flex",width:"Vertical"===o?r+"px":"auto",height:"Vertical"===o?"auto":r+"px",flexDirection:"Vertical"===o?"column":"row",overflow:"hidden",transform:"Horizontal"===o?"translate(".concat(-(r+15),"px, -50%)"):"translate(-50%, ".concat(-(r+10),"px)"),visibility:"hidden",cursor:"none"},children:u})},J=function(e){var t=e.oceanRef,n=e.oceanOffsetX,i=e.oceanOffsetY,o=A().gameInfo,s=Object(r.useRef)(null),a=I(),u=a.squareSize,j=(a.setSquareSize,v()),p=j.ocean,b=(j.computerOcean,Object(r.useState)([null,null])),x=Object(l.a)(b,2),O=x[0],g=x[1],y=Object(r.useState)(!0),m=Object(l.a)(y,2),C=m[0],w=m[1];return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{ref:t,style:{height:8*u+"px",width:8*u+"px",position:"relative",overflow:"hidden"},onMouseEnter:"enteringShips"===o.phase?function(e){return d(s)}:void 0,onMouseMove:function(e){return"enteringShips"===o.phase?h(e,s,n,i):void 0},onMouseLeave:"enteringShips"===o.phase?function(e){return f(s)}:void 0,children:[Object(c.jsx)(L,{}),"enteringShips"===o.phase&&Object(c.jsx)(G,{hoverRef:s,placementIsDisabled:C}),p.map((function(e,t){return Object(c.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",position:"relative",height:u+"px"},children:e.map((function(e,n){var r=[t,n];switch(e){case 0:return Object(c.jsx)(F,{coordinates:r,squareValue:e,isHovering:O,setIsHovering:g,placementIsDisabled:C,setPlacementIsDisabled:w},n);case 1:return Object(c.jsx)(X,{shipColor:"var(--shipColor)"},n);default:return Object(c.jsx)(Y,{coordinates:r,squareValue:e,shipColor:"var(--shipColor)"},n)}}))},t)})),"playing"===o.phase&&Object(c.jsx)("div",{style:{width:"100%",height:"100%",position:"absolute",top:"0",left:"0"}})]})})},T=function(e){var t=e.size,n=(A().gameInfo,Object(r.useRef)(null)),i=I(),o=i.squareSize,s=i.setSquareSize,a=Object(r.useState)(0),u=Object(l.a)(a,2),h=u[0],d=u[1],f=Object(r.useState)(0),j=Object(l.a)(f,2),p=j[0],b=j[1];Object(r.useEffect)((function(){window.innerWidth<400?s(38):s(50),n.current&&(d(n.current.getBoundingClientRect().left),b(n.current.getBoundingClientRect().top))}),[window.innerWidth,n.current]);var x={display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",transform:"none",position:"relative",transition:"0.6s ease-in-out"};return"small"===t&&(x.position="absolute",x.top="-63%",x.left="0",x.transform="scale(25%)"),Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{style:x,children:[Object(c.jsx)(N,{}),Object(c.jsxs)("div",{style:{display:"flex",alignItems:"center",height:8*o+"px"},children:[Object(c.jsx)(W,{}),Object(c.jsx)(J,{oceanRef:n,oceanOffsetX:h,oceanOffsetY:p})]})]})})},U=function(e){var t=e.hoverRef;return Object(c.jsx)("div",{style:{position:"absolute",height:"50px",width:"50px",visibility:"visible",transform:"translate(-50%, -50%)",color:"red",alignItems:"center",justifyContent:"center",cursor:"none"},ref:t,children:Object(c.jsx)(R.b,{size:"2.3rem"})})},K=function(e){e.coordinates;var t=e.squareValue,n=Object(r.useState)(""),i=Object(l.a)(n,2),o=i[0],s=i[1],a=Object(c.jsx)("div",{style:{height:"75%",width:"75%",borderRadius:"50%",opacity:"0.5",border:"solid white 2.5px"}}),u=Object(c.jsx)("div",{style:{height:"75%",width:"75%",borderRadius:"50%",opacity:"0.9",border:"solid red 3px",backgroundColor:"var(--disabledShipColor)"}});return Object(c.jsx)("div",{onClick:function(){return 0===t&&s(a),void(t>0&&s(u))},style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",cursor:"none"},children:o})},Q=function(e){var t=e.oceanRef,n=e.oceanOffsetX,i=e.oceanOffsetY,o=(A().gameInfo,Object(r.useRef)(null)),s=I(),a=s.squareSize,u=(s.setSquareSize,v()),j=(u.ocean,u.computerOcean),p=Object(r.useState)([null,null]),b=Object(l.a)(p,2),x=(b[0],b[1],Object(r.useState)(!0)),O=Object(l.a)(x,2);O[0],O[1];return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{ref:t,style:{height:8*a+"px",width:8*a+"px",position:"relative",overflow:"hidden"},onMouseEnter:function(e){return d(o)},onMouseMove:function(e){return h(e,o,n,i)},onMouseLeave:function(e){return f(o)},children:[Object(c.jsx)(L,{}),Object(c.jsx)(U,{hoverRef:o}),j.map((function(e,t){return Object(c.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",position:"relative",height:a+"px"},children:e.map((function(e,n){var r=[t,n];return Object(c.jsx)(K,{coordinates:r,squareValue:e})}))},t)}))]})})},Z=function(e){var t=e.size,n=(A().gameInfo,Object(r.useRef)(null)),i=I(),o=i.squareSize,s=i.setSquareSize,a=Object(r.useState)(0),u=Object(l.a)(a,2),h=u[0],d=u[1],f=Object(r.useState)(0),j=Object(l.a)(f,2),p=j[0],b=j[1];Object(r.useEffect)((function(){window.innerWidth<400?s(38):s(50),n.current&&(d(n.current.getBoundingClientRect().left),b(n.current.getBoundingClientRect().top))}),[window.innerWidth,n.current]);var x={display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",transform:"none",position:"relative",transition:"0.6s ease-in-out"};return"small"===t&&(x.position="absolute",x.top="-63%",x.left="0",x.transform="scale(25%)"),Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{style:x,children:[Object(c.jsx)(N,{}),Object(c.jsxs)("div",{style:{display:"flex",alignItems:"center",height:8*o+"px"},children:[Object(c.jsx)(W,{}),Object(c.jsx)(Q,{oceanRef:n,oceanOffsetX:h,oceanOffsetY:p})]})]})})},$=function(){var e=A().gameInfo,t=Object(r.useState)(0),n=Object(l.a)(t,2),i=n[0],o=n[1],s=Object(r.useRef)(null);Object(r.useEffect)((function(){return i||o(H()({el:s.current,mouseControls:!1,touchControls:!1,gyroControls:!1,minHeight:200,minWidth:200,scale:1,scaleMobile:1,color:1056310,waveHeight:30,waveSpeed:.4,zoom:.81})),function(){i&&i.destroy()}}),[i]);var a=Object(r.useState)(!0),u=Object(l.a)(a,2);u[0],u[1];return Object(c.jsxs)("div",{ref:s,style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",width:"100vw",height:"700px"},children:[Object(c.jsx)(E,{}),Object(c.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:"450px",height:"450px"},children:[Object(c.jsx)(T,{size:"enteringShips"===e.phase?"large":"small"}),"playing"===e.phase&&Object(c.jsx)(Z,{size:"large"})]})]})},_=function(){return Object(c.jsx)(z,{children:Object(c.jsx)(B,{children:Object(c.jsx)(x,{children:Object(c.jsx)(C,{children:Object(c.jsx)($,{})})})})})};s.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(_,{})}),document.getElementById("root"))},3:function(e,t,n){}},[[28,1,2]]]);
//# sourceMappingURL=main.a108bfb8.chunk.js.map