(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{27:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),s=n(8),l=n.n(s),o=n(3),c=n(2),a=n(0),u=Array(8).fill(0).map((function(){return Array(8).fill(0)})),h=r.a.createContext(u),d=function(e){var t=e.children,n=Object(i.useReducer)((function(e,t){switch(t.type){case"enterCoordinates":case"enterShips":return t.payload}}),u),r=Object(c.a)(n,2),s=r[0],l=r[1],d={ocean:s,enterCoordinates:function(e){var t=Object(o.a)(s);l({type:"enterCoordinates",payload:t})},enterShips:function(e,t){var n=Object(o.a)(s);n=function(e,t,n){for(var i=0;i<t.length;i++){var r=t[i].coords[0],s=t[i].coords[1];0===i?e[r][s]="Horizontal"===n?2:4:i===t.length-1?e[r][s]="Horizontal"===n?3:5:e[r][s]=1}return e}(n,e,t),l({type:"enterShips",payload:n})}};return Object(a.jsx)(h.Provider,{value:d,children:t})},p=function(){return Object(i.useContext)(h)},j=n(9),f=function e(t,n,i,r,s,l,o){Object(j.a)(this,e),this.name=void 0,this.length=void 0,this.orientation=void 0,this.mainX=void 0,this.mainY=void 0,this.coordinateArray=void 0,this.isCurrent=void 0,this.name=t,this.length=n,this.orientation=i,this.mainX=r,this.mainY=s,this.coordinateArray=l,this.isCurrent=o},x=[new f("Battleship",4,"Horizontal",null,null,null,!0),new f("Carrier",5,"Horizontal",null,null,null,!1),new f("Cruiser",3,"Horizontal",null,null,null,!1),new f("Submarine",3,"Horizontal",null,null,null,!1),new f("Destroyer",2,"Horizontal",null,null,null,!1)],b=r.a.createContext(x),y=function(e){var t=e.children,n=Object(i.useReducer)((function(e,t){switch(t.type){case"setCurrentShip":case"updateCurrentShip":return t.payload}}),x),r=Object(c.a)(n,2),s=r[0],l=r[1],u={currentShip:function(){for(var e=0;e<s.length;e++)if(s[e].isCurrent)return s[e]},updateCurrentShip:function(e,t){for(var n,i=Object(o.a)(s),r=0;r<i.length;r++)if(i[r].isCurrent)switch(n=i[r],e){case"changeOrientation":"Vertical"===n.orientation?n.orientation="Horizontal":n.orientation="Vertical",l({type:"updateCurrentShip",payload:i});break;case"updateCoords":n.coordinateArray=t,l({type:"updateCurrentShip",payload:i})}},setCurrentShip:function(e){for(var t=Object(o.a)(s),n=0;n<t.length;n++){if(e.name===t[n].name)return n===t.length-1||(t[n].isCurrent=!1,t[n+1].isCurrent=!0),void l({type:"setCurrentShip",payload:t});t[n].isCurrent=!1}},ships:s};return Object(a.jsx)(b.Provider,{value:u,children:t})},v=function(){return Object(i.useContext)(b)},g=n(10),O=n.n(g),C=(n(5),function(e){var t=e.squareValue,n=e.coordinates,i=e.isHovering,r=e.setIsHovering,s=v(),l=(s.ships,s.currentShip),c=s.setCurrentShip,u=s.updateCurrentShip;l=l();var h=p(),d=h.ocean,j=h.enterShips,f=Object(a.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:"var(--shipColor)"}}),x=null,b=function(e,t,n,i){if(null===n||null===i)return null;var r=Array(e).fill(0);if("Vertical"===t)for(var s=-1;s<r.length-1;s++)r[s+1]={coords:[n+s,i],isHit:!1};else for(var l=-1;l<r.length-1;l++)r[l+1]={coords:[n,i+l],isHit:!1};return r}(l.length,l.orientation,i[0],i[1]),y=function(){j(b,l.orientation),u("updateCoords",b),c(l)};if(b){var g=function(e,t,n,i,r,s){for(var l=0;l<e.length;l++){var o=e[l].coords[0],c=e[l].coords[1];if(o===r[0]&&c===r[1]&&(n=t),o<0||o>7)return{inner:null,handleClick:null};if(c<0||c>7)return{inner:null,handleClick:null};0!=s[o][c]&&(n=null,i=null)}return{inner:n,handleClick:i}}(b,f,x,y,n,d);x=g.inner,y=g.handleClick}return 1!==t&&2!==t||(x=f),Object(a.jsx)("div",{onClick:y,onMouseEnter:function(){return r(Object(o.a)(n))},onMouseLeave:function(){return r([null,null])},style:{width:"50px",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",overflow:"hidden"},children:x})}),m=function(){for(var e=[],t=[],n=0;n<8;n++){var i="2px solid white",r="2px solid white";7===n&&(i="none",r="none"),e.push(Object(a.jsx)("div",{style:{width:"50px",height:"100%",borderRight:i}})),t.push(Object(a.jsx)("div",{style:{width:"100%",height:"50%",borderBottom:r}}))}return Object(a.jsxs)("div",{style:{width:"400px",height:"400px",position:"absolute",top:"0",left:"0",backgroundColor:"transparent"},children:[Object(a.jsx)("div",{style:{position:"absolute",width:"400px",height:"400px",display:"flex",justifyContent:"flex-start",alignItems:"center"},children:e}),Object(a.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},children:t})]})},w=function(){return Object(a.jsx)("div",{style:{width:"50px",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",backgroundColor:"var(--shipColor)",border:"2px solid var(--shipColor)",overflow:"hidden"},children:Object(a.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:"var(--shipColor)"}})})},S=function(e){var t,n=e.coordinates;switch(e.squareValue){case 2:default:t="pointLeft";break;case 3:t="pointRight","2px solid white";break;case 4:t="pointUp","2px solid white";break;case 5:t="pointDown"}return 7===n[1]&&"none",Object(a.jsx)("div",{style:{height:"95%",width:"50px",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(a.jsx)("div",{className:"endPiece ".concat(t)})})},I=function(){for(var e=p().ocean,t=(v().ships,Object(i.useState)([null,null])),n=Object(c.a)(t,2),r=n[0],s=n[1],l=[],o=[],u=0;u<9;u++)0===u?l.push(Object(a.jsx)("div",{style:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",color:"white",opacity:"0.5"}})):l.push(Object(a.jsx)("div",{style:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",color:"white",opacity:"0.5"},children:String.fromCharCode(u-1+65)}));for(var h=0;h<8;h++)o.push(Object(a.jsx)("div",{style:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",color:"white",opacity:"0.5"},children:h+1}));return Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},children:[Object(a.jsx)("div",{style:{height:"50px",width:"450px",display:"flex"},children:l}),Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center",height:"400px"},children:[Object(a.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"50px",height:"100%"},children:o}),Object(a.jsxs)("div",{style:{height:"400px",width:"400px",position:"relative"},children:[Object(a.jsx)(m,{}),e.map((function(e,t){return Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",position:"relative",height:"50px"},children:e.map((function(e,n){var i=[t,n];switch(e){case 0:return Object(a.jsx)(C,{coordinates:i,squareValue:e,isHovering:r,setIsHovering:s},n);case 1:return Object(a.jsx)(w,{},n);default:return Object(a.jsx)(S,{coordinates:i,squareValue:e},n)}}))},t)}))]})]})]})},k=n(11),H=function(){var e=v(),t=(e.ships,e.currentShip),n=e.updateCurrentShip,i=t=t(),r=i.name,s=i.length,l=i.orientation;return Object(a.jsxs)("div",{style:{marginBottom:"10px",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"white"},children:[Object(a.jsxs)("h1",{style:{margin:"8px"},children:["Place your\xa0",Object(a.jsx)("span",{style:{borderBottom:"2px solid white"},children:r})]}),Object(a.jsxs)("ul",{style:{listStyleType:"none",width:"400px"},children:[Object(a.jsxs)("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"10px"},children:[Object(a.jsx)("span",{children:"Length:"}),Object(a.jsxs)("span",{style:{fontSize:"1.3rem"},children:[s,"\xa0tiles"]})]}),Object(a.jsxs)("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(a.jsx)("span",{children:"Orientation:"}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(a.jsx)("span",{style:{textDecoration:"underline",marginRight:"10px",fontSize:"1.3rem"},children:l}),Object(a.jsx)("button",{onClick:function(){return n("changeOrientation")},className:"orientationToggle",children:Object(a.jsx)(k.a,{color:"white",size:"2rem"})})]})]})]})]})},z=function(){var e=Object(i.useState)(0),t=Object(c.a)(e,2),n=t[0],r=t[1],s=Object(i.useRef)(null);Object(i.useEffect)((function(){return n||r(O()({el:s.current,mouseControls:!1,touchControls:!1,gyroControls:!1,minHeight:200,minWidth:200,scale:1,scaleMobile:1,color:1645342,waveHeight:30,waveSpeed:.25,zoom:.81})),function(){n&&n.destroy()}}),[n]);var l=Object(i.useState)(!0),o=Object(c.a)(l,2),u=o[0];o[1];return Object(a.jsxs)("div",{ref:s,style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",width:"100vw",height:"700px"},children:[u?Object(a.jsx)(H,{}):null,Object(a.jsx)(I,{})]})},A=function(){return Object(i.useEffect)((function(){var e=document.createElement("script");return e.setAttribute("id","threeScript"),e.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"),document.getElementsByTagName("head")[0].appendChild(e),function(){e&&e.remove()}}),[]),Object(a.jsx)(d,{children:Object(a.jsx)(y,{children:Object(a.jsx)(z,{})})})};l.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(A,{})}),document.getElementById("root"))},5:function(e,t,n){}},[[27,1,2]]]);
//# sourceMappingURL=main.c6cb1cf6.chunk.js.map