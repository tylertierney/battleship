(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{27:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),s=n(8),o=n.n(s),l=n(3),c=n(2),a=n(0),u=function(e,t,n,i,r,s){for(var o=0;o<e.length;o++){var l=e[o].coords[0],c=e[o].coords[1];if(l===r[0]&&c===r[1]&&(n=Object(a.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:"rgb(0, 0, 0, 0.3)",zIndex:-1}})),l<0||l>7)return{inner:null,handleClick:null};if(c<0||c>7)return{inner:null,handleClick:null};0!=s[l][c]&&(n=null,i=null)}return{inner:n,handleClick:i}},h=Array(8).fill(0).map((function(){return Array(8).fill(0)})),d=r.a.createContext(h),j=function(e){var t=e.children,n=Object(i.useReducer)((function(e,t){switch(t.type){case"enterCoordinates":case"enterShips":return t.payload}}),h),r=Object(c.a)(n,2),s=r[0],o=r[1],u={ocean:s,enterCoordinates:function(e){var t=Object(l.a)(s);o({type:"enterCoordinates",payload:t})},enterShips:function(e,t){var n=Object(l.a)(s);n=function(e,t,n){for(var i=0;i<t.length;i++){var r=t[i].coords[0],s=t[i].coords[1];0===i?e[r][s]="Horizontal"===n?2:4:i===t.length-1?e[r][s]="Horizontal"===n?3:5:e[r][s]=1}return e}(n,e,t),o({type:"enterShips",payload:n})}};return Object(a.jsx)(d.Provider,{value:u,children:t})},p=function(){return Object(i.useContext)(d)},f=n(9),b=function e(t,n,i,r,s,o,l){Object(f.a)(this,e),this.name=void 0,this.length=void 0,this.orientation=void 0,this.mainX=void 0,this.mainY=void 0,this.coordinateArray=void 0,this.isCurrent=void 0,this.name=t,this.length=n,this.orientation=i,this.mainX=r,this.mainY=s,this.coordinateArray=o,this.isCurrent=l},x=[new b("Battleship",4,"Horizontal",null,null,null,!0),new b("Carrier",5,"Horizontal",null,null,null,!1),new b("Cruiser",3,"Horizontal",null,null,null,!1),new b("Submarine",3,"Horizontal",null,null,null,!1),new b("Destroyer",2,"Horizontal",null,null,null,!1)],v=r.a.createContext(x),y=function(e){var t=e.children,n=Object(i.useReducer)((function(e,t){switch(t.type){case"setCurrentShip":case"updateCurrentShip":return t.payload}}),x),r=Object(c.a)(n,2),s=r[0],o=r[1],u={currentShip:function(){for(var e=0;e<s.length;e++)if(s[e].isCurrent)return s[e]},updateCurrentShip:function(e,t){for(var n,i=Object(l.a)(s),r=0;r<i.length;r++)if(i[r].isCurrent)switch(n=i[r],e){case"changeOrientation":"Vertical"===n.orientation?n.orientation="Horizontal":n.orientation="Vertical",o({type:"updateCurrentShip",payload:i});break;case"updateCoords":n.coordinateArray=t,o({type:"updateCurrentShip",payload:i})}},setCurrentShip:function(e){for(var t=Object(l.a)(s),n=0;n<t.length;n++){if(e.name===t[n].name)return n===t.length-1||(t[n].isCurrent=!1,t[n+1].isCurrent=!0),void o({type:"setCurrentShip",payload:t});t[n].isCurrent=!1}},ships:s};return Object(a.jsx)(v.Provider,{value:u,children:t})},O=function(){return Object(i.useContext)(v)},g=r.a.createContext(50),C=function(e){var t=e.children,n=Object(i.useState)(50),r=Object(c.a)(n,2),s={squareSize:r[0],setSquareSize:r[1]};return Object(a.jsx)(g.Provider,{value:s,children:t})},m=function(){return Object(i.useContext)(g)},w=n(10),S=n.n(w),I=(n(4),function(e){e.squareValue;var t=e.coordinates,n=e.isHovering,r=e.setIsHovering,s=e.placementIsDisabled,o=e.setPlacementIsDisabled,c=e.setIsEnteringShips,h=m().squareSize,d=O(),j=(d.ships,d.currentShip),f=d.setCurrentShip,b=d.updateCurrentShip;j=j();var x=p(),v=x.ocean,y=x.enterShips,g=null,C=function(e,t,n,i){if(null===n||null===i)return null;var r=Array(e).fill(0);if("Vertical"===t)for(var s=-1;s<r.length-1;s++)r[s+1]={coords:[n+s,i],isHit:!1};else for(var o=-1;o<r.length-1;o++)r[o+1]={coords:[n,i+o],isHit:!1};return r}(j.length,j.orientation,n[0],n[1]),w=function(){y(C,j.orientation),b("updateCoords",C),f(j),"Destroyer"===j.name&&c(!1)};if(Object(i.useEffect)((function(){if(C){var e=u(C,0,g,w,t,v);w=e.handleClick,null===e.handleClick?o((function(){return!0})):o((function(){return!1}))}null==C&&o((function(){return!0}))}),[JSON.stringify(C)]),C){var S=u(C,0,g,w,t,v);g=S.inner}return Object(a.jsx)("div",{onClick:s?null:w,onMouseEnter:function(){return r(Object(l.a)(t))},onMouseLeave:function(){return r([null,null])},style:{width:h+"px",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",cursor:"none"},children:g})}),z=function(){for(var e=m().squareSize,t=[],n=[],i=0;i<8;i++){var r="2px solid white",s="2px solid white";7===i&&(r="none",s="none"),t.push(Object(a.jsx)("div",{style:{width:e+"px",height:"100%",borderRight:r}},i)),n.push(Object(a.jsx)("div",{style:{width:"100%",height:"50%",borderBottom:s}},i))}return Object(a.jsxs)("div",{style:{width:8*e+"px",height:8*e+"px",position:"absolute",top:"0",left:"0",backgroundColor:"transparent"},children:[Object(a.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",justifyContent:"flex-start",alignItems:"center"},children:t}),Object(a.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},children:n})]})},q=function(e){var t=e.shipColor,n=m().squareSize;return Object(a.jsx)("div",{style:{width:n+"px",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:t,overflow:"hidden",cursor:"none"},children:Object(a.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:t,overflow:"hidden"}})})},H=function(e){e.coordinates;var t,n=e.squareValue,i=e.shipColor,r=m().squareSize;switch(n){case 2:default:t="pointLeft";break;case 3:t="pointRight","2px solid white";break;case 4:t="pointUp","2px solid white";break;case 5:t="pointDown"}return Object(a.jsx)("div",{style:{height:"95%",width:r+"px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"none"},children:Object(a.jsx)("div",{style:{backgroundColor:i,borderColor:i},className:"endPiece ".concat(t)})})},k=function(e){var t=e.hoverRef,n=e.placementIsDisabled,i=m().squareSize,r=O().currentShip,s=(r=r()).orientation,o=[],l="var(--hoveredShipColor)";n&&(l="rgb(173, 0, 0, 0.5)");for(var c=0;c<r.length;c++)0===c?"Horizontal"===s?o.push(Object(a.jsx)(H,{coordinates:[3,3],squareValue:2,shipColor:l},c)):o.push(Object(a.jsx)(H,{coordinates:[3,3],squareValue:4,shipColor:l},c)):c===r.length-1?"Horizontal"===s?o.push(Object(a.jsx)(H,{coordinates:[3,3],squareValue:3,shipColor:l},c)):o.push(Object(a.jsx)(H,{coordinates:[3,3],squareValue:5,shipColor:l},c)):o.push(Object(a.jsx)(q,{shipColor:l},c));var u=o.map((function(e,t){return Object(a.jsx)("div",{style:{width:i+"px",height:i+"px",overflow:"hidden"},children:e},t)}));return Object(a.jsx)("div",{ref:t,style:{position:"absolute",display:"flex",width:"Vertical"===s?i+"px":"auto",height:"Vertical"===s?"auto":i+"px",flexDirection:"Vertical"===s?"column":"row",overflow:"hidden",transform:"Horizontal"===s?"translate(".concat(-(i+15),"px, -50%)"):"translate(-50%, ".concat(-(i+10),"px)"),visibility:"hidden",cursor:"none"},children:u})},D=function(e){var t=e.numbers,n=m().squareSize;return Object(a.jsx)("div",{style:{display:"flex",flexDirection:"column",width:n+"px",height:"100%"},children:t})},V=function(e){var t=e.letters,n=m().squareSize;return Object(a.jsx)("div",{style:{height:n+"px",width:9*n+"px",display:"flex"},children:t})},E=function(e){var t=e.setIsEnteringShips,n=Object(i.useRef)(null),r=Object(i.useRef)(null),s=m(),o=s.squareSize,l=s.setSquareSize,u=Object(i.useState)(0),h=Object(c.a)(u,2),d=h[0],j=h[1],f=Object(i.useState)(0),b=Object(c.a)(f,2),x=b[0],v=b[1];Object(i.useEffect)((function(){window.innerWidth<400?l(38):l(50),r.current&&(j(r.current.getBoundingClientRect().left),v(r.current.getBoundingClientRect().top))}),[window.innerWidth,r.current]);var y=p().ocean,O=Object(i.useState)([null,null]),g=Object(c.a)(O,2),C=g[0],w=g[1],S=function(){for(var e=[],t=0;t<9;t++){var n=String.fromCharCode(t-1+65);0===t&&(n=null),e.push(Object(a.jsx)("div",{style:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",color:"white",opacity:"0.5"},children:n},t))}return e}(),E=function(){for(var e=[],t=0;t<8;t++)e.push(Object(a.jsx)("div",{style:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",color:"white",opacity:"0.5"},children:t+1},t));return e}(),R=Object(i.useState)(!0),M=Object(c.a)(R,2),B=M[0],P=M[1];return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},children:[Object(a.jsx)(V,{letters:S}),Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center",height:8*o+"px"},children:[Object(a.jsx)(D,{numbers:E}),Object(a.jsxs)("div",{ref:r,style:{height:8*o+"px",width:8*o+"px",position:"relative",overflow:"hidden"},onMouseEnter:function(e){n.current&&(n.current.style.display="flex",n.current.style.visibility="visible")},onMouseMove:function(e){return function(e,t,n,i){e.target;var r=e.clientX-n,s=e.clientY-i;(t=t.current).style.top=s+"px",t.style.left=r+"px"}(e,n,d,x)},onMouseLeave:function(e){n.current&&(n.current.style.display="none",n.current.style.visibility="hidden")},children:[Object(a.jsx)(z,{}),Object(a.jsx)(k,{hoverRef:n,placementIsDisabled:B}),y.map((function(e,n){return Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",position:"relative",height:o+"px"},children:e.map((function(e,i){var r=[n,i];switch(e){case 0:return Object(a.jsx)(I,{coordinates:r,squareValue:e,isHovering:C,setIsHovering:w,placementIsDisabled:B,setPlacementIsDisabled:P,setIsEnteringShips:t},i);case 1:return Object(a.jsx)(q,{shipColor:"var(--shipColor)"},i);default:return Object(a.jsx)(H,{coordinates:r,squareValue:e,shipColor:"var(--shipColor)"},i)}}))},n)}))]})]})]})})},R=n(11),M=function(){m().squareSize;var e=O(),t=(e.ships,e.currentShip),n=e.updateCurrentShip,i=t=t(),r=i.name,s=i.length,o=i.orientation;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h1",{style:{margin:"8px"},className:"instructionsHeader",children:["Place your\xa0",Object(a.jsx)("span",{style:{borderBottom:"2px solid white"},children:r})]}),Object(a.jsxs)("ul",{style:{listStyleType:"none",minWidth:"300px",maxWidth:"450px",padding:"0"},children:[Object(a.jsxs)("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"10px"},children:[Object(a.jsx)("span",{children:"Length:"}),Object(a.jsxs)("span",{className:"instructionControls",children:[s,"\xa0tiles"]})]}),Object(a.jsxs)("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(a.jsx)("span",{children:"Orientation:"}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(a.jsx)("span",{style:{textDecoration:"underline",marginRight:"10px"},className:"instructionControls",children:o}),Object(a.jsx)("button",{onClick:function(){return n("changeOrientation")},className:"orientationToggle",children:Object(a.jsx)(R.a,{color:"white",size:"2rem"})})]})]})]})]})},B=function(){return Object(a.jsx)("div",{children:"hi"})},P=function(e){var t=e.isEnteringShips;return Object(a.jsx)("div",{style:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"white",maxWidth:"90vw"},children:t?Object(a.jsx)(M,{}):Object(a.jsx)(B,{})})},A=function(){var e=Object(i.useState)(0),t=Object(c.a)(e,2),n=t[0],r=t[1],s=Object(i.useRef)(null);Object(i.useEffect)((function(){return n||r(S()({el:s.current,mouseControls:!1,touchControls:!1,gyroControls:!1,minHeight:200,minWidth:200,scale:1,scaleMobile:1,color:1056310,waveHeight:30,waveSpeed:.4,zoom:.81})),function(){n&&n.destroy()}}),[n]);var o=Object(i.useState)(!0),l=Object(c.a)(o,2),u=l[0],h=l[1];return Object(a.jsxs)("div",{ref:s,style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",width:"100vw",height:"700px"},children:[Object(a.jsx)(P,{isEnteringShips:u}),Object(a.jsx)(E,{setIsEnteringShips:h})]})},N=function(){return Object(a.jsx)(C,{children:Object(a.jsx)(j,{children:Object(a.jsx)(y,{children:Object(a.jsx)(A,{})})})})};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(N,{})}),document.getElementById("root"))},4:function(e,t,n){}},[[27,1,2]]]);
//# sourceMappingURL=main.f5898888.chunk.js.map